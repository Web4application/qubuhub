<template><div><h2>Dashboard</h2><section><h3>Chat</h3><textarea v-model="prompt"></textarea><button @click="sendChat">Send</button><div>{{reply}}</div></section><section><h3>Image</h3><input v-model="imgPrompt"/><button @click="genImage">Gen</button><img v-if="imgUrl" :src="imgUrl" style="max-width:300px"/></section><section><h3>TTS</h3><input v-model="ttsText"/><button @click="playTTS">Play</button><audio ref="audio" controls/></section></div></template><script>import axios from 'axios'; export default {props:['token'],data(){return{prompt:'',reply:'',imgPrompt:'',imgUrl:'',ttsText:''}},methods:{auth(){return{headers:{Authorization:`Bearer ${this.token}`}}},async sendChat(){const r=await axios.post('/api/chat',{prompt:this.prompt},this.auth()); this.reply=r.data.reply},async genImage(){const r=await axios.post('/api/image',{prompt:this.imgPrompt},this.auth()); this.imgUrl=r.data.url},async playTTS(){const r=await axios.post('/api/tts',{text:this.ttsText},{...this.auth(),responseType:'blob'}); const url=URL.createObjectURL(r.data); this.$refs.audio.src=url; this.$refs.audio.play()}}}</script>
