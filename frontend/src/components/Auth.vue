<template><div><h2>Login/Register</h2><input v-model="email" placeholder="email"/><input v-model="password" type="password" placeholder="password"/><button @click="register">Register</button><button @click="login">Login</button><p v-if="err">{{err}}</p></div></template><script>import axios from 'axios'; export default {data(){return{email:'',password:'',err:''}},methods:{async register(){try{const r=await axios.post('/api/auth/register',{email:this.email,password:this.password}); this.$emit('authed',r.data.access_token)}catch(e){this.err=e.response?.data?.detail||e.message}},async login(){try{const r=await axios.post('/api/auth/login',{email:this.email,password:this.password}); this.$emit('authed',r.data.access_token)}catch(e){this.err=e.response?.data?.detail||e.message}}}}</script>
